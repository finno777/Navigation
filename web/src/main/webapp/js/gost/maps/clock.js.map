/* This file is generated — do not edit by hand! */
/* eslint-disable */
{"version":3,"sources":["clock.js"],"names":["pad","num","width","numAsString","padLength","length","Array","join","TimeSync","correction","serverUrl","window","BannerConstants","crBanner","sync","setInterval","headers","Accept","$","ajax","dataType","type","url","success","Date","data","currentTime","TimeRenderer","timeSync","hourEl","document","querySelector","minutesEl","secondsEl","mSecondsEl","dateEl","dayEl","daysOfWeek","months","updateCalendar","serverTime","updateClock","removeClass","now","textContent","computeDateString","getDay","innerHTML","getHours","getMinutes","getSeconds","getMilliseconds","date","day","getDate","month","getMonth","year","getFullYear","renderer","init"],"mappings":"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","file":"../clock.js","sourcesContent":["/* global $ */\r\n($ => {\r\n    function pad(num, width) {\r\n        const numAsString = `${num}`;\r\n        const padLength = (width - numAsString.length) + 1;\r\n        return numAsString.length >= width ? numAsString : new Array(padLength).join('0') + numAsString;\r\n    }\r\n\r\n    class TimeSync {\r\n        constructor() {\r\n            this.correction = 0;\r\n            this.serverUrl = `${window.BannerConstants.crBanner}/commons/time`;\r\n\r\n            this.sync();\r\n            setInterval(() => {\r\n                this.sync();\r\n            }, 30 * 1000);\r\n        }\r\n\r\n        sync() {\r\n            const headers = {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            };\r\n\r\n            $.ajax({\r\n                dataType: 'json',\r\n                headers,\r\n                type: 'GET',\r\n                url: this.serverUrl,\r\n                success: data => {\r\n                    this.correction = new Date() - new Date(data.currentTime);\r\n                },\r\n            });\r\n        }\r\n\r\n        get serverTime() {\r\n            return new Date(new Date() - this.correction);\r\n        }\r\n    }\r\n\r\n    class TimeRenderer {\r\n        constructor() {\r\n            this.timeSync = new TimeSync();\r\n            this.hourEl = document.querySelector('[data-clock=\"h\"]');\r\n            this.minutesEl = document.querySelector('[data-clock=\"m\"]');\r\n            this.secondsEl = document.querySelector('[data-clock=\"s\"]');\r\n            this.mSecondsEl = document.querySelector('[data-clock=\"ms\"]');\r\n\r\n            this.dateEl = document.querySelector('[data-clock=\"date\"]');\r\n            this.dayEl = document.querySelector('[data-clock=\"dayOfWeek\"]');\r\n\r\n            this.daysOfWeek = [\r\n                'Воскресенье',\r\n                'Понедельник',\r\n                'Вторник',\r\n                'Среда',\r\n                'Четверг',\r\n                'Пятница',\r\n                'Суббота',\r\n            ];\r\n\r\n            this.months = [\r\n                'января',\r\n                'февраля',\r\n                'марта',\r\n                'апреля',\r\n                'мая',\r\n                'июня',\r\n                'июля',\r\n                'августа',\r\n                'сентября',\r\n                'октября',\r\n                'ноября',\r\n                'декабря',\r\n            ];\r\n        }\r\n\r\n        init() {\r\n            this.updateCalendar(this.timeSync.serverTime);\r\n            setInterval(() => this.updateClock(this.timeSync.serverTime), 20);\r\n            setInterval(() => this.updateCalendar(this.timeSync.serverTime), 1000);\r\n            $('.datetime.uninitialized').removeClass('uninitialized');\r\n        }\r\n\r\n        updateCalendar(now) {\r\n            this.dateEl.textContent = this.computeDateString(now);\r\n            this.dayEl.textContent = this.daysOfWeek[now.getDay()];\r\n        }\r\n\r\n        updateClock(now) {\r\n            this.hourEl.innerHTML = pad(now.getHours(), 2);\r\n            this.minutesEl.innerHTML = pad(now.getMinutes(), 2);\r\n            this.secondsEl.innerHTML = pad(now.getSeconds(), 2);\r\n            this.mSecondsEl.innerHTML = pad(now.getMilliseconds(), 3);\r\n        }\r\n\r\n        computeDateString(date) {\r\n            const day = date.getDate();\r\n            const month = this.months[date.getMonth()];\r\n            const year = date.getFullYear();\r\n\r\n            return `${day} ${month} ${year}`;\r\n        }\r\n    }\r\n\r\n    const renderer = new TimeRenderer();\r\n    renderer.init();\r\n})($);\r\n"]}