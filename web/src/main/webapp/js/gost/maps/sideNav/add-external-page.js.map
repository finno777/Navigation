/* This file is generated â€” do not edit by hand! */
/* eslint-disable */
{"version":3,"sources":["sideNav/add-external-page.js"],"names":["AddExternalPage","$elem","that","gostValidation","window","$pageName","find","$pageLink","$pageDesc","sideNav","closest","attr","savedExternalPage","initAddExternalPage","page","val","displayName","description","uri","setAllValid","fillExternalPageData","trim","link","name","internal","nodeId","custom","validateExternalPage","selector","requiredFilled","validateRequiredValues","externalPage","suitableLengths","validateValuesLength","validPattern","validatePattern","isValid","addExternalPage","newPage","pages","map","groups","forEach","group","push","dialog","settings","render","init","add","$","fn","fnAddExternalPage","each","index","elem"],"mappings":"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","file":"../../sideNav/add-external-page.js","sourcesContent":["/* global $ */\r\n/* eslint no-param-reassign: 0 */\r\n/* eslint no-new: 0 */\r\n(() => {\r\n    function AddExternalPage($elem) {\r\n        this.$elem = $elem;\r\n\r\n        const that = this;\r\n        const gostValidation = window.gostValidation;\r\n        const $pageName = this.$elem.find('.js-pageName');\r\n        const $pageLink = this.$elem.find('.js-pageLink');\r\n        const $pageDesc = this.$elem.find('.js-pageDescription');\r\n        const sideNav = window[`sideNav${$elem.closest('[data-appId]').attr('data-appId')}`];\r\n        let savedExternalPage = null;\r\n\r\n        const initAddExternalPage = page => {\r\n            if (page) {\r\n                $pageName.val(page.displayName);\r\n                $pageDesc.val(page.description);\r\n                $pageLink.val(page.uri);\r\n                savedExternalPage = page;\r\n            } else {\r\n                $pageName.val('');\r\n                $pageDesc.val('');\r\n                $pageLink.val('');\r\n                savedExternalPage = null;\r\n            }\r\n            gostValidation.setAllValid();\r\n        };\r\n\r\n        const fillExternalPageData = () => {\r\n            const displayName = $pageName.val().trim();\r\n            const link = $pageLink.val().trim();\r\n            const description = $pageDesc.val().trim();\r\n\r\n            return {\r\n                name: null,\r\n                displayName,\r\n                description,\r\n                uri: link,\r\n                internal: false,\r\n                nodeId: null,\r\n                custom: true,\r\n            };\r\n        };\r\n\r\n        const validateExternalPage = externalPage => {\r\n            const selector = `[data-appId = \"${that.$elem.closest('[data-appId]').attr('data-appId')}\"] .js-sideNavAddExternalPage`;\r\n            const requiredFilled = gostValidation.validateRequiredValues(externalPage, selector);\r\n            const suitableLengths = gostValidation.validateValuesLength(externalPage, selector);\r\n            const validPattern = gostValidation.validatePattern(externalPage, selector);\r\n            const isValid = requiredFilled && suitableLengths && validPattern;\r\n            return isValid;\r\n        };\r\n\r\n        const addExternalPage = () => {\r\n            const newPage = fillExternalPageData();\r\n            const isValid = validateExternalPage(newPage);\r\n\r\n            if (isValid) {\r\n                if (savedExternalPage) {\r\n                    sideNav.pages = sideNav.pages.map(page => {\r\n                        if (page !== savedExternalPage) return page;\r\n\r\n                        return newPage;\r\n                    });\r\n\r\n                    sideNav.groups.forEach(group => {\r\n                        group.pages = group.pages.map(page => {\r\n                            if (page !== savedExternalPage) return page;\r\n\r\n                            return newPage;\r\n                        });\r\n                    });\r\n                } else {\r\n                    sideNav.pages.push(newPage);\r\n                }\r\n\r\n                that.$elem.dialog('close');\r\n                sideNav.settings.render();\r\n            }\r\n        };\r\n\r\n        this.init = () => {\r\n            sideNav.addExternalPage = {\r\n                init: initAddExternalPage,\r\n                add: addExternalPage,\r\n            };\r\n        };\r\n        this.init();\r\n    }\r\n\r\n    $.fn.fnAddExternalPage = function () {\r\n        $(this).each((index, elem) => {\r\n            new AddExternalPage($(elem));\r\n        });\r\n    };\r\n    $('[data-appId]').each(function () {\r\n        if (!window[`sideNav${$(this).attr('data-appId')}`]) return;\r\n\r\n        $(this).find('.js-sideNavAddExternalPage').fnAddExternalPage();\r\n    });\r\n})();\r\n"]}